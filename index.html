<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/icon.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Vu Lan</title>
    
    <!-- Custom Analytics - Google Sheets Tracking -->
    <!-- Commented out to avoid double tracking - using component-based tracking instead -->
    <!--
    <script>
      (function() {
        // console.log('🚀 Custom Analytics script loaded');
        
        const params = new URLSearchParams(window.location.search);
        const source = params.get('utm_source') || 'direct';
        const medium = params.get('utm_medium') || 'unknown';
        const campaign = params.get('utm_campaign') || 'unknown';
        const ua = navigator.userAgent;

        // Sử dụng GET request thay vì POST để tránh CORS
        const logUrl = "https://script.google.com/macros/s/AKfycbx390vmmwr9fTs-ka2XryKk-04Vd5rs_-lvXhKCa89A5cNRIWVUkzCSHKhUBX2E6g1s/exec"
          + `?source=${encodeURIComponent(source)}`
          + `&medium=${encodeURIComponent(medium)}`
          + `&campaign=${encodeURIComponent(campaign)}`
          + `&ua=${encodeURIComponent(ua)}`;

        // Gửi request ngầm
        fetch(logUrl)
          .then(response => {
            if (response.ok) {
              // console.log('✅ Initial data sent to Google Sheets successfully');
            } else {
              // console.error('❌ Failed to send initial data:', response.status);
            }
          })
          .catch(err => {
            // console.error("❌ Error sending initial data:", err);
          });

        // console.log('📊 Tracking initialized with:', {
        //   source: source,
        //   medium: medium,
        //   campaign: campaign,
        //   ua: ua
        // });
      })();
    </script>
    -->
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-19EHY206N6"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-19EHY206N6');
    </script>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.jsx"></script>
  </body>
</html>
